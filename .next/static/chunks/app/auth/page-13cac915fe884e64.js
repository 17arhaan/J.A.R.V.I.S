(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{4241:function(e,t,a){Promise.resolve().then(a.bind(a,3298))},3298:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(3827),s=a(4090),i=a(7907),n=a(8371);function l(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(""),[c,o]=(0,s.useState)(""),[u,d]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),b=(0,s.useRef)(null),x=(0,s.useRef)(null),f=(0,s.useRef)(null),g=(0,i.useRouter)();(0,s.useEffect)(()=>()=>{f.current&&f.current.getTracks().forEach(e=>e.stop())},[]);let p=async()=>{try{t(!0),l("Starting camera...");let e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});f.current=e,b.current&&(b.current.srcObject=e,l("Camera ready. Look at the camera for authentication."))}catch(e){console.error("Error accessing camera:",e),l("Error accessing camera. Please ensure camera permissions are granted."),t(!1)}},v=()=>{if(!b.current||!x.current)return null;let e=b.current,t=x.current,a=t.getContext("2d");return a?(t.width=e.videoWidth,t.height=e.videoHeight,a.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")):null},N=async()=>{try{d(!0),o("Authenticating..."),m(!0);let e=v();if(!e){o("Failed to capture image. Please try again."),d(!1),m(!1);return}let t=await fetch("".concat("http://localhost:3000","/api/face-auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e})});if(!t.ok)throw Error("API responded with status: ".concat(t.status));let a=await t.json();a.authenticated&&a.confidence>.6?(o("Authentication successful! Welcome, ".concat(a.user_id)),sessionStorage.setItem("user",JSON.stringify({id:a.user_id,authenticated:!0,timestamp:a.timestamp})),setTimeout(()=>{g.push("/dashboard")},1500)):o("Authentication failed. Confidence: ".concat((100*a.confidence).toFixed(2),"% (Minimum required: 60%)"))}catch(e){console.error("Authentication error:",e),o("Error during authentication: ".concat(e.message||"Unknown error",". Please try again."))}finally{d(!1),m(!1)}};return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,r.jsx)("div",{className:"relative max-w-md w-full",children:(0,r.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gray-900 rounded-lg shadow-2xl p-8 border border-blue-500/30",children:[(0,r.jsx)("div",{className:"absolute -top-4 -left-4 -right-4 -bottom-4 bg-blue-500/5 rounded-lg blur-xl z-0"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(n.E.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.8},className:"text-3xl font-bold text-center text-blue-400 mb-1",children:"J.A.R.V.I.S"}),(0,r.jsx)(n.E.div,{initial:{width:"0%"},animate:{width:"100%"},transition:{delay:.5,duration:.8},className:"h-0.5 bg-blue-500/50 mb-4 mx-auto"}),(0,r.jsx)("h2",{className:"text-xl text-center text-blue-300/80 mb-6",children:"Facial Recognition System"}),(0,r.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden aspect-video mb-4 border border-blue-500/20",children:[h&&(0,r.jsx)("div",{className:"absolute inset-0 z-20",children:(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-[280px] aspect-square relative",children:[(0,r.jsx)(n.E.div,{initial:{top:0},animate:{top:["0%","100%","0%"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute left-0 right-0 h-1 bg-blue-400/70 z-30"}),(0,r.jsx)("div",{className:"absolute inset-[15%] border-2 border-dashed border-blue-400/70 rounded-full"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-blue-400"}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-blue-400"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-blue-400"}),(0,r.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-blue-400"})]})})}),(0,r.jsx)("video",{ref:b,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover ".concat(e?"block":"hidden")}),(0,r.jsx)("canvas",{ref:x,className:"hidden"}),!e&&(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsx)(n.E.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY},className:"text-5xl mb-2 text-blue-400/80",children:"\uD83D\uDC64"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Camera inactive"})]})]}),(0,r.jsx)("p",{className:"text-center text-sm text-blue-300/70 mb-2",children:a}),(0,r.jsx)(n.E.p,{animate:c?{opacity:[0,1]}:{opacity:0},transition:{duration:.3},className:"text-center mb-4 font-medium ".concat(c.includes("successful")?"text-green-400":c.includes("failed")?"text-red-400":"text-blue-300"),children:c}),(0,r.jsx)("div",{className:"flex flex-col gap-3 mb-4",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.E.button,{whileHover:{scale:1.03},whileTap:{scale:.98},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors relative overflow-hidden",onClick:N,disabled:u,children:[u?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating..."]}):"Authenticate",(0,r.jsx)(n.E.div,{animate:{x:["0%","100%","0%"],opacity:[0,1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-blue-300 to-transparent"})]}),(0,r.jsx)(n.E.button,{whileHover:{scale:1.03},whileTap:{scale:.98},className:"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",onClick:()=>{f.current&&(f.current.getTracks().forEach(e=>e.stop()),f.current=null),b.current&&(b.current.srcObject=null),t(!1),l("")},disabled:u,children:"Stop Camera"})]}):(0,r.jsx)(n.E.button,{whileHover:{scale:1.03},whileTap:{scale:.98},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",onClick:p,disabled:u,children:"Start Camera"})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsx)(n.E.button,{whileHover:{scale:1.05},className:"text-blue-400 hover:text-blue-300 underline transition-colors",onClick:()=>{sessionStorage.setItem("user",JSON.stringify({id:"guest",authenticated:!1,timestamp:new Date().toISOString()})),g.push("/dashboard")},disabled:u,children:"Continue as Guest"})}),(0,r.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"This system uses facial recognition for authentication. Your face data is processed securely and not shared with third parties."})]})]})})})}},7907:function(e,t,a){"use strict";var r=a(5313);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[371,971,69,744],function(){return e(e.s=4241)}),_N_E=e.O()}]);