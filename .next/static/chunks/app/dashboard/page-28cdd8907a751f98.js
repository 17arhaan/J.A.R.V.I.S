(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9427:function(e,t,r){Promise.resolve().then(r.bind(r,8075))},8075:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var s=r(3827),a=r(4090),i=r(7907),n=r(8371),l=r(3856),o=r(2435),c=r(4561),d=r(3449);class u extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m(e){let{children:t,isPresent:r}=e,i=(0,a.useId)(),n=(0,a.useRef)(null),l=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:o}=(0,a.useContext)(d._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:a}=l.current;if(r||!n.current||!e||!t)return;n.current.dataset.motionPopId=i;let c=document.createElement("style");return o&&(c.nonce=o),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[r]),(0,s.jsx)(u,{isPresent:r,childRef:n,sizeRef:l,children:a.cloneElement(t,{ref:n})})}let h=e=>{let{children:t,initial:r,isPresent:i,onExitComplete:n,custom:l,presenceAffectsLayout:d,mode:u}=e,h=(0,o.h)(b),x=(0,a.useId)(),g=(0,a.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;n&&n()},[h,n]),p=(0,a.useMemo)(()=>({id:x,initial:r,isPresent:i,custom:l,onExitComplete:g,register:e=>(h.set(e,!1),()=>h.delete(e))}),d?[Math.random(),g]:[i,g]);return(0,a.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),a.useEffect(()=>{i||h.size||!n||n()},[i]),"popLayout"===u&&(t=(0,s.jsx)(m,{isPresent:i,children:t})),(0,s.jsx)(c.O.Provider,{value:p,children:t})};function b(){return new Map}var x=r(3177);let g=e=>e.key||"";function p(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var f=r(5526);let y=e=>{let{children:t,custom:r,initial:i=!0,onExitComplete:n,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1}=e,[m,b]=(0,x.oO)(u),y=(0,a.useMemo)(()=>p(t),[t]),v=u&&!m?[]:y.map(g),j=(0,a.useRef)(!0),N=(0,a.useRef)(y),w=(0,o.h)(()=>new Map),[I,S]=(0,a.useState)(y),[E,T]=(0,a.useState)(y);(0,f.L)(()=>{j.current=!1,N.current=y;for(let e=0;e<E.length;e++){let t=g(E[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[E,v.length,v.join("-")]);let C=[];if(y!==I){let e=[...y];for(let t=0;t<E.length;t++){let r=E[t],s=g(r);v.includes(s)||(e.splice(t,0,r),C.push(r))}"wait"===d&&C.length&&(e=C),T(p(e)),S(y);return}let{forceRender:k}=(0,a.useContext)(l.p);return(0,s.jsx)(s.Fragment,{children:E.map(e=>{let t=g(e),a=(!u||!!m)&&(y===E||v.includes(t));return(0,s.jsx)(h,{isPresent:a,initial:(!j.current||!!i)&&void 0,custom:a?void 0:r,presenceAffectsLayout:c,mode:d,onExitComplete:a?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),T(N.current),u&&(null==b||b()),n&&n())},children:e},t)})})};function v(e){let{API_URL:t,user:r}=e,[i,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[b,x]=(0,a.useState)(!1),g=(0,a.useRef)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{l([{id:"welcome",sender:"assistant",text:"Hello! I'm J.A.R.V.I.S, your AI assistant. How can I help you today?",timestamp:new Date().toISOString()}])},[]),(0,a.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[i]);let f=e=>{x(!0),h("");let t=0,r=()=>{t<e.length?(h(r=>r+e.charAt(t)),t++,p.current=setTimeout(r,30*Math.random()+10)):x(!1)};return r(),()=>{p.current&&clearTimeout(p.current)}},v=async e=>{if(e.preventDefault(),!o.trim())return;let s={id:Date.now().toString(),sender:"user",text:o,timestamp:new Date().toISOString()};l(e=>[...e,s]),c(""),u(!0);try{let e;try{e=await fetch("".concat(t,"/api/gemini-chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s.text,user_id:(null==r?void 0:r.id)||"guest",history:i.map(e=>({role:"user"===e.sender?"user":"model",content:e.text}))})})}catch(a){console.log("Gemini API not available, falling back to chatbot endpoint"),e=await fetch("".concat(t,"/api/chatbot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s.text,user_id:(null==r?void 0:r.id)||"guest"})})}if(!e.ok)throw Error("API responded with status: ".concat(e.status));let a=await e.json(),n={id:(Date.now()+1).toString(),sender:"assistant",text:a.response,timestamp:a.timestamp||new Date().toISOString()};f(n.text),setTimeout(()=>{l(e=>[...e,n]),x(!1)},20*n.text.length+500)}catch(t){console.error("Error sending message:",t);let e={id:(Date.now()+1).toString(),sender:"assistant",text:"Sorry, I encountered an error while processing your request. Please try again.",timestamp:new Date().toISOString()};l(t=>[...t,e]),x(!1)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl border border-blue-500/20 h-[calc(100vh-12rem)] flex flex-col relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -inset-2 bg-blue-500/5 blur-xl z-0"}),(0,s.jsx)("div",{className:"p-4 border-b border-blue-500/20 relative z-10",children:(0,s.jsxs)("h2",{className:"text-xl font-bold text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"J.A.R.V.I.S Interface"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-blue-500/20 scrollbar-track-gray-800/20 relative z-10",children:(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[i.map(e=>(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.sender?"bg-blue-600 text-white border border-blue-400/30":"bg-gray-800 text-gray-200 border border-blue-500/20"),children:[(0,s.jsx)("p",{children:e.text}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.sender?"text-blue-200":"text-gray-400"),children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)),b&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,s.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 bg-gray-800 text-gray-200 border border-blue-500/20",children:(0,s.jsxs)("p",{children:[m,(0,s.jsx)("span",{className:"animate-pulse",children:"|"})]})})}),d&&!b&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-3 max-w-[80%] border border-blue-500/20",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,s.jsx)("div",{ref:g})]})})}),(0,s.jsx)("div",{className:"p-4 border-t border-blue-500/20 relative z-10",children:(0,s.jsxs)("form",{onSubmit:v,className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Type your message...",className:"flex-grow px-4 py-2 bg-gray-800 border border-blue-500/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-200",disabled:d||b}),(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors relative overflow-hidden",disabled:d||b||!o.trim(),children:["Send",(0,s.jsx)(n.E.div,{animate:{x:["0%","100%","0%"],opacity:[0,1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-blue-300 to-transparent"})]})]})})]})}function j(e){let{API_URL:t}=e,[r,i]=(0,a.useState)(null),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,b]=(0,a.useState)(!1),x=(0,a.useRef)(null),g=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),y=async()=>{try{if(f.current){if(p.current&&g.current){let e=p.current,t=g.current,r=t.getContext("2d");if(r){t.width=e.videoWidth,t.height=e.videoHeight,r.drawImage(e,0,0,t.width,t.height);let s=t.toDataURL("image/jpeg");i(s),o([]),m(null),v()}}}else{let e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"environment"}});f.current=e,p.current&&(p.current.srcObject=e)}}catch(e){console.error("Error accessing camera:",e),m("Error accessing camera. Please ensure camera permissions are granted.")}},v=()=>{f.current&&(f.current.getTracks().forEach(e=>e.stop()),f.current=null),p.current&&(p.current.srcObject=null)},j=async()=>{if(r){d(!0),m(null),b(!0);try{let e=await fetch("".concat(t,"/api/object-detect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:r})});if(!e.ok)throw Error("API responded with status: ".concat(e.status));let s=await e.json();s.detections?(o(s.detections),N(s.detections)):m("No objects detected or error in detection.")}catch(e){console.error("Error detecting objects:",e),m("Error communicating with the server: ".concat(e.message||"Unknown error",". Please ensure the backend API is running."))}finally{d(!1),setTimeout(()=>b(!1),500)}}},N=e=>{if(!r||!g.current)return;let t=g.current,s=t.getContext("2d");if(!s)return;let a=new Image;a.crossOrigin="anonymous",a.src=r,a.onload=()=>{t.width=a.width,t.height=a.height,s.drawImage(a,0,0,t.width,t.height),e.forEach(e=>{let{x1:t,y1:r,width:a,height:i}=e.bbox,n=100*e.confidence;s.strokeStyle="#00BFFF",s.lineWidth=3,s.strokeRect(t,r,a,i),s.fillStyle="rgba(0, 191, 255, 0.7)",s.fillRect(t,r-25,Math.max(a,100),25),s.fillStyle="#FFFFFF",s.font="16px 'Courier New', monospace",s.fillText("".concat(e.class_name," (").concat(n.toFixed(1),"%)"),t+5,r-7),s.beginPath(),s.moveTo(t,r+10),s.lineTo(t,r),s.lineTo(t+10,r),s.strokeStyle="#00FFFF",s.lineWidth=2,s.stroke(),s.beginPath(),s.moveTo(t+a-10,r),s.lineTo(t+a,r),s.lineTo(t+a,r+10),s.stroke(),s.beginPath(),s.moveTo(t,r+i-10),s.lineTo(t,r+i),s.lineTo(t+10,r+i),s.stroke(),s.beginPath(),s.moveTo(t+a-10,r+i),s.lineTo(t+a,r+i),s.lineTo(t+a,r+i-10),s.stroke()})}};return(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl border border-blue-500/20 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -inset-2 bg-blue-500/5 blur-xl z-0"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Vision System"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors relative overflow-hidden",children:["Upload Image",(0,s.jsx)(n.E.div,{animate:{x:["0%","100%","0%"],opacity:[0,1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-blue-300 to-transparent"})]}),(0,s.jsx)("input",{type:"file",ref:x,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;let s=new FileReader;s.onload=e=>{var t;i(null===(t=e.target)||void 0===t?void 0:t.result),o([]),m(null)},s.readAsDataURL(r)},accept:"image/*",className:"hidden"}),(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors relative overflow-hidden",children:[f.current?"Capture Photo":"Use Camera",(0,s.jsx)(n.E.div,{animate:{x:["0%","100%","0%"],opacity:[0,1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-green-300 to-transparent"})]}),f.current&&(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Stop Camera"}),r&&(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors relative overflow-hidden",disabled:c,children:[c?"Detecting...":"Detect Objects",(0,s.jsx)(n.E.div,{animate:{x:["0%","100%","0%"],opacity:[0,1,0]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-purple-300 to-transparent"})]})]}),u&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-900/50 text-red-300 rounded-lg border border-red-500/30",children:u}),(0,s.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden border border-blue-500/20",children:[f.current?(0,s.jsx)("video",{ref:p,autoPlay:!0,playsInline:!0,className:"w-full max-h-[60vh] object-contain"}):r?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("canvas",{ref:g,className:"w-full max-h-[60vh] object-contain mx-auto"}),h&&(0,s.jsx)(n.E.div,{initial:{top:0},animate:{top:["0%","100%","0%"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute left-0 right-0 h-1 bg-blue-400/70 z-30"}),(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,s.jsx)("div",{className:"w-full h-full bg-grid-pattern opacity-10"})})]}):(0,s.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,s.jsx)(n.E.p,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY},className:"text-blue-400",children:"Upload an image or use the camera to detect objects"})}),c&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-white text-center",children:[(0,s.jsxs)("div",{className:"inline-block h-12 w-12 relative",children:[(0,s.jsx)(n.E.div,{animate:{rotate:360},transition:{duration:1.5,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute inset-0 rounded-full border-t-2 border-b-2 border-blue-400"}),(0,s.jsx)(n.E.div,{animate:{rotate:-360},transition:{duration:3,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute inset-1 rounded-full border-r-2 border-l-2 border-blue-300"})]}),(0,s.jsx)("p",{className:"mt-2",children:"Analyzing image..."})]})})]}),l.length>0&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mt-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 text-blue-300",children:["Detected Objects (",l.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:l.map(e=>(0,s.jsxs)(n.E.div,{whileHover:{scale:1.03,backgroundColor:"rgba(59, 130, 246, 0.1)"},className:"bg-gray-800/80 p-3 rounded-lg border border-blue-500/30",children:[(0,s.jsx)("div",{className:"font-medium text-blue-300",children:e.class_name}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Confidence:",(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1.5 mt-1",children:(0,s.jsx)("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:"".concat(100*e.confidence,"%")}})}),(0,s.jsxs)("div",{className:"text-right text-xs mt-1",children:[(100*e.confidence).toFixed(1),"%"]})]})]},e.id))})]})]})]})}function N(e,t){let r=atob(e),s=[];for(let e=0;e<r.length;e+=512){let t=r.slice(e,e+512),a=Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);let i=new Uint8Array(a);s.push(i)}return new Blob(s,{type:t})}function w(e){let{API_URL:t}=e,[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(0),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[x,g]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),[j,w]=(0,a.useState)(null),[I,S]=(0,a.useState)(null),[E,T]=(0,a.useState)(null),[C,k]=(0,a.useState)([]),[R,P]=(0,a.useState)(null),[A,O]=(0,a.useState)(!1),F=(0,a.useRef)(null),D=(0,a.useRef)([]),V=(0,a.useRef)(null),_=(0,a.useRef)(null),U=(0,a.useRef)(null),L=(0,a.useRef)(null),z=(0,a.useRef)(null),H=(0,a.useRef)(null),M=(0,a.useRef)(null);(0,a.useEffect)(()=>{window.SpeechRecognition||window.webkitSpeechRecognition?console.log("Browser speech recognition is available"):console.log("Browser speech recognition is not available")},[]),(0,a.useEffect)(()=>()=>{H.current&&cancelAnimationFrame(H.current),L.current&&L.current.close(),M.current&&M.current.stop()},[]);let J=e=>{L.current||(L.current=new AudioContext);let t=L.current,s=t.createAnalyser();z.current=s,t.createMediaStreamSource(e).connect(s),s.fftSize=256;let a=s.frequencyBinCount,i=new Uint8Array(a),n=()=>{r&&(s.getByteFrequencyData(i),k(Array.from({length:16},(e,t)=>Math.min(100,i[Math.floor(a/16*t)]/2.55))),H.current=requestAnimationFrame(n))};n()},Y=()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return v("Browser speech recognition is not available"),!1;try{let t=new e;return M.current=t,t.lang="en-US",t.continuous=!0,t.interimResults=!0,t.onresult=e=>{let t=Array.from(e.results).map(e=>e[0]).map(e=>e.transcript).join("");m(t)},t.onerror=e=>{console.error("Speech recognition error",e.error),v("Speech recognition error: ".concat(e.error))},t.start(),!0}catch(e){return console.error("Error starting browser speech recognition:",e),v("Error starting browser speech recognition"),!1}},q=async()=>{try{v(null),d(""),m(""),b(""),g(""),P(null),k(Array(16).fill(0)),T(null);let e=await navigator.mediaDevices.getUserMedia({audio:!0});A&&!Y()&&O(!1);let t="audio/mp3";MediaRecorder.isTypeSupported(t)||(t="audio/webm");let r=new MediaRecorder(e,{mimeType:t});F.current=r,D.current=[],r.ondataavailable=e=>{e.data.size>0&&D.current.push(e.data)},r.onstop=W,J(e),r.start(),i(!0);let s=0;V.current=setInterval(()=>{s++,o(s),s>=10&&B()},1e3)}catch(e){console.error("Error starting recording:",e),v("Error accessing microphone. Please ensure microphone permissions are granted.")}},B=()=>{F.current&&"inactive"!==F.current.state&&(F.current.stop(),F.current.stream.getTracks().forEach(e=>e.stop())),M.current&&(M.current.stop(),M.current=null),V.current&&(clearInterval(V.current),V.current=null),H.current&&(cancelAnimationFrame(H.current),H.current=null),i(!1),k(Array(16).fill(0))},W=async()=>{try{f(!0),P("Processing audio...");let e=new Blob(D.current,{type:"audio/mp3"});w(e);let r=URL.createObjectURL(e);if(S(r),_.current&&(_.current.src=r),A&&u){await G(u),f(!1);return}let s=new FormData;s.append("audio",e,"recording.mp3");try{let e;P("Processing voice command...");let r=await fetch("".concat(t,"/api/voice-command"),{method:"POST",body:s});if(!r.ok)throw console.error("API responded with status: ".concat(r.status)),Error("API responded with status: ".concat(r.status));try{e=await r.json()}catch(e){throw console.error("Error parsing JSON response:",e),Error("Invalid response format from server")}if(e.error){v(e.error),f(!1);return}if(d(e.command||""),m(e.command||""),b(e.intent||"general_query"),g(e.response||""),e.audio)try{let t=N(e.audio,"audio/mp3"),r=URL.createObjectURL(t);T(r),U.current?(U.current.src=r,U.current.play()):new Audio(r).play()}catch(e){console.error("Error playing response audio:",e)}"error"===e.intent&&"Speech recognition unavailable"===e.command&&(O(!0),console.log("Switching to browser speech recognition for future requests"))}catch(e){console.error("Error with voice command:",e),(window.SpeechRecognition||window.webkitSpeechRecognition)&&!A?(O(!0),v("Backend speech recognition failed. Switching to browser speech recognition for future requests.")):(d("Voice processing failed"),m("Voice processing failed"),b("error"),g("I'm having trouble processing your voice command. The backend API may not be fully implemented yet or is experiencing issues."),v("Voice command processing failed. Please check the backend API."))}}catch(e){console.error("Error processing voice command:",e),v("Error processing voice command. Please try again."),d("Error occurred"),g("An error occurred while processing your request.")}finally{f(!1),P(null)}},G=async e=>{try{P("Processing transcription...");let r=await fetch("".concat(t,"/api/chatbot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,user_id:"voice_user"})});if(!r.ok)throw Error("API responded with status: ".concat(r.status));let s=await r.json();if(s.response){d(e),b("browser_recognition"),g(s.response);try{let e=await fetch("".concat(t,"/api/tts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s.response})}),r=await e.json();if(r.audio){let e=N(r.audio,"audio/mp3"),t=URL.createObjectURL(e);T(t),U.current?(U.current.src=t,U.current.play()):new Audio(t).play()}}catch(e){console.error("TTS not available:",e)}}}catch(e){console.error("Error processing transcription:",e),g("I'm sorry, I couldn't process that request.")}};return(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl border border-blue-500/20 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -inset-2 bg-blue-500/5 blur-xl z-0"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Voice Interface"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsx)("div",{className:"mb-8 flex justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r?B:q,className:"w-24 h-24 rounded-full flex items-center justify-center text-white text-4xl transition-all relative ".concat(r?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),disabled:p,children:[r?"■":"\uD83C\uDFA4",r&&(0,s.jsx)(n.E.div,{animate:{scale:[1,1.2,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"easeInOut"},className:"absolute inset-0 rounded-full bg-red-500",style:{zIndex:-1}})]}),(0,s.jsx)("p",{className:"mt-2 text-blue-300",children:r?"Recording... ".concat(l,"s"):p?R||"Processing...":"Tap to speak"}),A&&(0,s.jsx)("div",{className:"mt-1 text-xs text-green-400",children:"Using browser speech recognition"})]})}),(r||p)&&(0,s.jsx)("div",{className:"flex justify-center items-end h-16 mb-6 space-x-1",children:C.map((e,t)=>(0,s.jsx)(n.E.div,{animate:{height:"".concat(e,"%")},transition:{duration:.1},className:"w-2 bg-blue-500/80 rounded-t",style:{minHeight:"4px"}},t))}),y&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-900/50 text-red-300 rounded-lg border border-red-500/30",children:y}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800/80 p-4 rounded-lg border border-blue-500/20",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-blue-300",children:"Recognized Command"}),(0,s.jsx)("div",{className:"min-h-[50px] p-3 bg-gray-900/80 rounded border border-blue-500/10 text-gray-300",children:u||"No command recognized yet"}),h&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-300",children:"Detected Intent:"}),(0,s.jsx)("span",{className:"inline-block mt-1 px-3 py-1 bg-blue-900/50 text-blue-300 rounded-full text-sm border border-blue-500/20",children:h})]}),(0,s.jsx)("div",{className:"mt-4",children:I&&(0,s.jsx)("audio",{ref:_,controls:!0,className:"w-full h-10 rounded",style:{filter:"hue-rotate(180deg) saturate(70%)",backgroundColor:"#1e293b",color:"#60a5fa"}})})]}),(0,s.jsxs)("div",{className:"bg-gray-800/80 p-4 rounded-lg border border-blue-500/20",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-blue-300",children:"J.A.R.V.I.S Response"}),(0,s.jsx)("div",{className:"min-h-[150px] p-3 bg-gray-900/80 rounded border border-blue-500/10 text-gray-300",children:x?(0,s.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:x}):"No response yet"}),E&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("audio",{ref:U,controls:!0,className:"w-full h-10 rounded",style:{filter:"hue-rotate(180deg) saturate(70%)",backgroundColor:"#1e293b",color:"#60a5fa"},src:E})})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-blue-300",children:"Try These Commands"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:["What time is it?","Tell me a joke","What's the weather like today?","Turn on the lights","Set a timer for 5 minutes","What can you do?"].map((e,t)=>(0,s.jsxs)(n.E.div,{whileHover:{scale:1.03,backgroundColor:"rgba(59, 130, 246, 0.1)"},className:"bg-gray-800/50 p-3 rounded-lg border border-blue-500/20 text-gray-300 cursor-pointer",children:['"',e,'"']},t))})]})]})]})}function I(e){var t;let{user:r,systemStatus:i,API_URL:l,refreshStatus:o,handleLogout:c}=e,[d,u]=(0,a.useState)("profile"),[m,h]=(0,a.useState)(!1),[b,x]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(!1),N=(0,a.useRef)(null),w=(0,a.useRef)(null),I=(0,a.useRef)(null),S=async()=>{try{h(!0),x("Starting camera...");let e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});I.current=e,N.current&&(N.current.srcObject=e,x("Camera ready. Fill in your details and look at the camera."))}catch(e){console.error("Error accessing camera:",e),x("Error accessing camera. Please ensure camera permissions are granted."),h(!1)}},E=()=>{I.current&&(I.current.getTracks().forEach(e=>e.stop()),I.current=null),N.current&&(N.current.srcObject=null),h(!1),x(""),j(!1)},T=()=>{if(!N.current||!w.current)return null;let e=N.current,t=w.current,r=t.getContext("2d");return r?(t.width=e.videoWidth,t.height=e.videoHeight,r.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")):null},C=async()=>{if(!g.trim()||!f.trim()){x("Please enter both name and user ID.");return}try{x("Enrolling face..."),j(!0);let e=T();if(!e){x("Failed to capture image. Please try again."),j(!1);return}let t=await fetch("".concat(l,"/api/face-enroll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e,user_id:f,name:g,role:"user"})}),r=await t.json();r.success?(x("Success: ".concat(r.message)),p(""),y(""),setTimeout(()=>{E()},2e3)):x("Error: ".concat(r.message))}catch(e){console.error("Enrollment error:",e),x("Error during enrollment. Please try again.")}finally{j(!1)}};return(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl border border-blue-500/20 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -inset-2 bg-blue-500/5 blur-xl z-0"}),(0,s.jsxs)("div",{className:"flex relative z-10",children:[(0,s.jsx)("div",{className:"w-1/4 border-r border-blue-500/20",children:(0,s.jsx)("nav",{className:"p-4",children:(0,s.jsx)("ul",{className:"space-y-2",children:[{id:"profile",label:"Profile"},{id:"face-enrollment",label:"Face Enrollment"},{id:"system",label:"System"},{id:"about",label:"About"}].map(e=>(0,s.jsx)("li",{children:(0,s.jsx)(n.E.button,{whileHover:{x:5},onClick:()=>u(e.id),className:"w-full text-left px-3 py-2 rounded ".concat(d===e.id?"bg-blue-900/30 text-blue-400 border-l-2 border-blue-500":"hover:bg-gray-800/50 text-gray-300"),children:e.label})},e.id))})})}),(0,s.jsxs)("div",{className:"w-3/4 p-6",children:["profile"===d&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Profile Settings"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-300",children:"Current User"}),(0,s.jsx)("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-blue-500/20",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"bg-blue-900/50 text-blue-300 rounded-full w-12 h-12 flex items-center justify-center text-xl border border-blue-500/30",children:(null==r?void 0:null===(t=r.id)||void 0===t?void 0:t.charAt(0).toUpperCase())||"G"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-200",children:(null==r?void 0:r.id)||"Guest"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:(null==r?void 0:r.authenticated)?"Authenticated User":"Guest User"})]})]})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-300",children:"Session Information"}),(0,s.jsx)("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-blue-500/20",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Login Time"}),(0,s.jsx)("p",{className:"text-gray-300",children:new Date((null==r?void 0:r.timestamp)||Date.now()).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Authentication Method"}),(0,s.jsx)("p",{className:"text-gray-300",children:(null==r?void 0:r.authenticated)?"Face Recognition":"Guest Access"})]})]})})]}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-red-600/80 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors border border-red-500/30",children:"Logout"})]}),"face-enrollment"===d&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Face Enrollment"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("p",{className:"text-gray-300",children:"Enroll your face to use facial recognition for authentication. This will allow you to log in without a password."})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden aspect-video mb-4 border border-blue-500/20",children:[v&&(0,s.jsx)("div",{className:"absolute inset-0 z-20",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"w-full max-w-[280px] aspect-square relative",children:[(0,s.jsx)(n.E.div,{initial:{top:0},animate:{top:["0%","100%","0%"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute left-0 right-0 h-1 bg-blue-400/70 z-30"}),(0,s.jsx)("div",{className:"absolute inset-[15%] border-2 border-dashed border-blue-400/70 rounded-full"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-blue-400"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-blue-400"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-blue-400"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-blue-400"})]})})}),(0,s.jsx)("video",{ref:N,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover ".concat(m?"block":"hidden")}),(0,s.jsx)("canvas",{ref:w,className:"hidden"}),!m&&(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,s.jsx)(n.E.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY},className:"text-5xl mb-2 text-blue-400/80",children:"\uD83D\uDC64"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Camera inactive"})]})]}),(0,s.jsx)("p",{className:"text-center text-sm mb-4 ".concat(b.includes("Success")?"text-green-400":b.includes("Error")?"text-red-400":"text-blue-300"),children:b}),m?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-blue-500/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-200",placeholder:"Enter your full name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"User ID"}),(0,s.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-blue-500/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-200",placeholder:"Choose a user ID (e.g., john_doe)"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:C,className:"bg-green-600/80 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors border border-green-500/30",children:"Enroll Face"}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:E,className:"bg-red-600/80 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors border border-red-500/30",children:"Cancel"})]})]}):(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"bg-blue-600/80 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors border border-blue-500/30",children:"Start Enrollment"})]})]}),"system"===d&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"System Settings"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-300",children:"System Information"}),(0,s.jsx)("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-blue-500/20",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Status"}),(0,s.jsx)("p",{className:"online"===i.status?"text-green-400":"text-red-400",children:i.status||"Unknown"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Version"}),(0,s.jsx)("p",{className:"text-gray-300",children:i.version||"1.0.0"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-gray-300",children:i.timestamp?new Date(i.timestamp).toLocaleString():"Unknown"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"API Endpoint"}),(0,s.jsx)("p",{className:"text-gray-300",children:l})]})]})})]}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600/80 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors border border-blue-500/30",children:"Refresh System Status"})]}),"about"===d&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"About J.A.R.V.I.S"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),(0,s.jsxs)("div",{className:"prose max-w-none text-gray-300",children:[(0,s.jsx)("p",{children:"J.A.R.V.I.S (Just A Rather Very Intelligent System) is an AI assistant designed to help with various tasks through natural interaction."}),(0,s.jsx)("h3",{className:"text-blue-300",children:"Features"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Face Authentication"})," - Secure login using facial recognition"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Object Detection"})," - Identify objects in images using computer vision"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Voice Commands"})," - Control the system using natural voice instructions"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Chatbot"})," - Have natural conversations with the AI assistant"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Intent Classification"})," - Understand the meaning behind user requests"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Speech Synthesis"})," - Convert text responses to natural-sounding speech"]})]}),(0,s.jsx)("h3",{className:"text-blue-300",children:"Technologies"}),(0,s.jsx)("p",{children:"J.A.R.V.I.S is built using a combination of modern technologies:"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Frontend"}),": Next.js, React, Tailwind CSS, Framer Motion"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"Backend"}),": Python, Flask, PyTorch, TensorFlow"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"AI Models"}),": Computer Vision, NLP, Speech Processing, Google Gemini"]})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-400 mt-8",children:["Version 1.0.0 • \xa9 ",new Date().getFullYear()," J.A.R.V.I.S AI Assistant"]})]})]})]})]})]})}function S(e){var t,r,a,i,l,o,c,d,u,m;let{systemStatus:h,refreshStatus:b,setActiveTab:x}=e;return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"bg-gray-800/80 rounded-lg p-4 shadow-sm border border-blue-500/20",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-blue-300",children:"System"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Status:"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-white text-sm ".concat("online"===h.status?"bg-green-600/80":"bg-red-600/80"," border ").concat("online"===h.status?"border-green-500/30":"border-red-500/30"),children:h.status||"Unknown"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"CPU Usage:"}),(0,s.jsxs)("span",{className:"text-blue-300",children:[(null===(t=h.system)||void 0===t?void 0:t.cpu)||0,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 overflow-hidden",children:(0,s.jsx)(n.E.div,{initial:{width:0},animate:{width:"".concat((null===(r=h.system)||void 0===r?void 0:r.cpu)||0,"%")},transition:{duration:.8,ease:"easeOut"},className:"bg-blue-600 h-2.5 rounded-full relative",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/50 to-blue-400/50 animate-pulse"})})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Memory:"}),(0,s.jsxs)("span",{className:"text-blue-300",children:[(null===(a=h.system)||void 0===a?void 0:a.memory)||0,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 overflow-hidden",children:(0,s.jsx)(n.E.div,{initial:{width:0},animate:{width:"".concat((null===(i=h.system)||void 0===i?void 0:i.memory)||0,"%")},transition:{duration:.8,ease:"easeOut",delay:.2},className:"bg-purple-600 h-2.5 rounded-full relative",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/50 to-purple-400/50 animate-pulse"})})})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Disk:"}),(0,s.jsxs)("span",{className:"text-blue-300",children:[(null===(l=h.system)||void 0===l?void 0:l.disk)||0,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 overflow-hidden",children:(0,s.jsx)(n.E.div,{initial:{width:0},animate:{width:"".concat((null===(o=h.system)||void 0===o?void 0:o.disk)||0,"%")},transition:{duration:.8,ease:"easeOut",delay:.4},className:"bg-cyan-600 h-2.5 rounded-full relative",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-600/50 to-cyan-400/50 animate-pulse"})})})]})]})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"bg-gray-800/80 rounded-lg p-4 shadow-sm border border-blue-500/20",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-blue-300",children:"AI Modules"}),(0,s.jsx)("div",{className:"space-y-4",children:[{name:"Face Authentication",status:null===(c=h.modules)||void 0===c?void 0:c.face_auth},{name:"Object Detection",status:null===(d=h.modules)||void 0===d?void 0:d.object_detection},{name:"Voice Command",status:null===(u=h.modules)||void 0===u?void 0:u.voice_command},{name:"Chatbot",status:null===(m=h.modules)||void 0===m?void 0:m.chatbot}].map((e,t)=>(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-gray-300",children:[e.name,":"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(n.E.div,{animate:{backgroundColor:e.status?["rgba(74, 222, 128, 0.5)","rgba(74, 222, 128, 0.8)","rgba(74, 222, 128, 0.5)"]:["rgba(248, 113, 113, 0.5)","rgba(248, 113, 113, 0.8)","rgba(248, 113, 113, 0.5)"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY},className:"w-2 h-2 rounded-full mr-2"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-white text-sm ".concat(e.status?"bg-green-600/80":"bg-red-600/80"," border ").concat(e.status?"border-green-500/30":"border-red-500/30"),children:e.status?"Active":"Inactive"})]})]},e.name))})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"md:col-span-2 bg-gray-800/80 rounded-lg p-4 shadow-sm border border-blue-500/20",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-blue-300",children:"Quick Actions"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:"\uD83D\uDC41️",label:"Object Detection",action:()=>x("vision")},{icon:"\uD83D\uDCAC",label:"Chat with JARVIS",action:()=>x("chat")},{icon:"\uD83C\uDFA4",label:"Voice Commands",action:()=>x("voice")},{icon:"\uD83D\uDD04",label:"Refresh Status",action:()=>b()}].map((e,t)=>(0,s.jsxs)(n.E.button,{whileHover:{scale:1.05,backgroundColor:"rgba(59, 130, 246, 0.1)"},whileTap:{scale:.95},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},onClick:e.action,className:"flex flex-col items-center justify-center p-4 bg-gray-900/80 rounded-lg shadow-sm hover:bg-gray-800 transition-colors border border-blue-500/10",children:[(0,s.jsx)("span",{className:"text-2xl mb-2",children:e.icon}),(0,s.jsx)("span",{className:"text-gray-300",children:e.label})]},e.label))})]})]})}function E(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(null),[l,o]=(0,a.useState)("dashboard"),[c,d]=(0,a.useState)({}),[u,m]=(0,a.useState)(!0),h="http://localhost:3000";(0,a.useEffect)(()=>{{let t=sessionStorage.getItem("user");if(!t){e.push("/auth");return}r(JSON.parse(t)),b()}},[e]);let b=async()=>{try{m(!0);let e=await fetch("".concat(h,"/api/system-status"));if(!e.ok)throw Error("API responded with status: ".concat(e.status));let t=await e.json();d(t)}catch(e){console.error("Error fetching system status:",e),d({status:"offline",version:"1.0.0",timestamp:new Date().toISOString(),system:{cpu:0,memory:0,disk:0},modules:{face_auth:!1,object_detection:!1,voice_command:!1,chatbot:!1}})}finally{m(!1)}},x=()=>{sessionStorage.removeItem("user"),e.push("/auth")};return t?(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-black text-gray-200",children:[(0,s.jsxs)("header",{className:"bg-gray-900 border-b border-blue-500/30 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center p-4 relative z-10",children:[(0,s.jsxs)(n.E.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-2xl font-bold text-blue-400 flex items-center",children:[(0,s.jsx)("img",{src:"/jarvis.png",alt:"JARVIS Logo",className:"w-8 h-8 mr-2"}),"J.A.R.V.I.S",(0,s.jsx)("span",{className:"ml-2 text-xs bg-blue-900/50 px-2 py-0.5 rounded border border-blue-500/30",children:"v1.0"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-2 bg-gray-800/80 px-3 py-1 rounded-full border border-blue-500/20",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,s.jsxs)("span",{className:"text-sm",children:["Welcome, ",(null==t?void 0:t.id)==="guest"?"Guest":null==t?void 0:t.id]})]}),(0,s.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-red-600/80 hover:bg-red-700 px-3 py-1 rounded text-sm transition-colors border border-red-500/30",onClick:x,children:"Logout"})]})]})]}),(0,s.jsx)("nav",{className:"bg-gray-900/80 border-b border-blue-500/20",children:(0,s.jsx)("div",{className:"container mx-auto",children:(0,s.jsx)("ul",{className:"flex overflow-x-auto",children:[{id:"dashboard",label:"Dashboard"},{id:"vision",label:"Vision"},{id:"chat",label:"Chat"},{id:"voice",label:"Voice"},{id:"settings",label:"Settings"}].map(e=>(0,s.jsxs)(n.E.li,{className:"relative ".concat(l===e.id?"text-blue-400":"text-gray-400"),whileHover:{backgroundColor:"rgba(59, 130, 246, 0.1)"},children:[(0,s.jsx)("button",{onClick:()=>o(e.id),className:"px-4 py-3 relative z-10",children:e.label}),l===e.id&&(0,s.jsx)(n.E.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",initial:!1})]},e.id))})})}),(0,s.jsxs)("main",{className:"flex-grow container mx-auto p-4",children:["dashboard"===l&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl border border-blue-500/20 p-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -inset-2 bg-blue-500/5 blur-xl z-0"}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-400 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"System Status"}),(0,s.jsx)("div",{className:"h-px flex-grow bg-gradient-to-r from-blue-500/50 to-transparent"})]}),u?(0,s.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,s.jsxs)("div",{className:"inline-block h-12 w-12 relative",children:[(0,s.jsx)(n.E.div,{animate:{rotate:360},transition:{duration:1.5,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute inset-0 rounded-full border-t-2 border-b-2 border-blue-400"}),(0,s.jsx)(n.E.div,{animate:{rotate:-360},transition:{duration:3,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"absolute inset-1 rounded-full border-r-2 border-l-2 border-blue-300"})]}),(0,s.jsx)("p",{className:"ml-3 text-blue-300",children:"Loading system status..."})]}):(0,s.jsx)(S,{systemStatus:c,refreshStatus:b,setActiveTab:o})]})]})}),"vision"===l&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,s.jsx)(j,{API_URL:h})}),"chat"===l&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,s.jsx)(v,{API_URL:h,user:t})}),"voice"===l&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,s.jsx)(w,{API_URL:h})}),"settings"===l&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,s.jsx)(I,{user:t,systemStatus:c,API_URL:h,refreshStatus:b,handleLogout:x})})]}),(0,s.jsx)("footer",{className:"bg-gray-900 border-t border-blue-500/20 p-4 text-center text-gray-400 text-sm",children:(0,s.jsxs)("p",{children:["J.A.R.V.I.S AI Assistant \xa9 ",new Date().getFullYear()]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(n.E.h1,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY},className:"text-3xl font-bold text-blue-400",children:"J.A.R.V.I.S"}),(0,s.jsx)(n.E.div,{animate:{rotate:360,borderColor:["rgba(59, 130, 246, 0.3)","rgba(59, 130, 246, 0.8)","rgba(59, 130, 246, 0.3)"]},transition:{duration:2,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"w-12 h-12 rounded-full border-t-2 border-b-2 mx-auto mt-4"}),(0,s.jsx)("p",{className:"mt-4 text-blue-300",children:"Initializing system..."})]})})}},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[371,971,69,744],function(){return e(e.s=9427)}),_N_E=e.O()}]);